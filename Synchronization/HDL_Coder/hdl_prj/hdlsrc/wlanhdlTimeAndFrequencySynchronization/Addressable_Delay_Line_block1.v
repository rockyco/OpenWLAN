// -------------------------------------------------------------
// 
// File Name: hdl_prj/hdlsrc/wlanhdlTimeAndFrequencySynchronization/Addressable_Delay_Line_block1.v
// Created: 2026-02-04 22:38:44
// 
// Generated by MATLAB 25.1, HDL Coder 25.1, and Simulink 25.1
// 
// -------------------------------------------------------------


// -------------------------------------------------------------
// 
// Module: Addressable_Delay_Line_block1
// Source Path: wlanhdlTimeAndFrequencySynchronization/WLANTimeAndFrequencySynchronization/Fine Time Sync/Correlator/corrFilter/C1/Addressable_Delay_Line
// Hierarchy Level: 5
// Model version: 9.2
// 
// Addressable Delay Line
// 
// -------------------------------------------------------------

`timescale 1 ns / 1 ns

module Addressable_Delay_Line_block1
          (clk,
           reset,
           enb,
           dataIn,
           wrEn,
           wrAddr,
           rdAddr,
           syncReset,
           delayLineEnd,
           dataOut);


  input   clk;
  input   reset;
  input   enb;
  input   signed [16:0] dataIn;  // sfix17_En12
  input   wrEn;
  input   [2:0] wrAddr;  // ufix3
  input   [2:0] rdAddr;  // ufix3
  input   syncReset;
  output  signed [16:0] delayLineEnd;  // sfix17_En12
  output  signed [16:0] dataOut;  // sfix17_En12


  wire saveLast;
  reg  dataEndEn;
  wire wrEnN;
  wire dataEndEnS;
  wire signed [16:0] delayedSignals;  // sfix17_En12
  reg signed [16:0] delayLineEnd_1;  // sfix17_En12


  assign saveLast = wrAddr == rdAddr;

  always @(posedge clk or posedge reset)
    begin : dataOutReg_process
      if (reset == 1'b1) begin
        dataEndEn <= 1'b0;
      end
      else begin
        if (enb) begin
          if (syncReset == 1'b1) begin
            dataEndEn <= 1'b0;
          end
          else begin
            dataEndEn <= saveLast;
          end
        end
      end
    end

  assign wrEnN =  ~ dataEndEn;

  assign dataEndEnS = saveLast & wrEnN;

  SimpleDualPortRAM_generic_block #(.AddrWidth(3),
                                    .DataWidth(17)
                                    )
                                  u_simpleDualPortRam (.clk(clk),
                                                       .enb(enb),
                                                       .wr_din(dataIn),
                                                       .wr_addr(wrAddr),
                                                       .wr_en(wrEn),
                                                       .rd_addr(rdAddr),
                                                       .dout(delayedSignals)
                                                       );

  always @(posedge clk or posedge reset)
    begin : dataOutReg_1_process
      if (reset == 1'b1) begin
        delayLineEnd_1 <= 17'sb00000000000000000;
      end
      else begin
        if (enb) begin
          if (syncReset == 1'b1) begin
            delayLineEnd_1 <= 17'sb00000000000000000;
          end
          else begin
            if (dataEndEnS) begin
              delayLineEnd_1 <= delayedSignals;
            end
          end
        end
      end
    end

  assign dataOut = delayedSignals;

  assign delayLineEnd = delayLineEnd_1;

endmodule  // Addressable_Delay_Line_block1

