// -------------------------------------------------------------
// 
// File Name: hdl_prj/hdlsrc/wlanhdlTimeAndFrequencySynchronization/Peak_Searcher.v
// Created: 2026-02-04 22:38:44
// 
// Generated by MATLAB 25.1, HDL Coder 25.1, and Simulink 25.1
// 
// -------------------------------------------------------------


// -------------------------------------------------------------
// 
// Module: Peak_Searcher
// Source Path: wlanhdlTimeAndFrequencySynchronization/WLANTimeAndFrequencySynchronization/Fine Time Sync/Peak Searcher
// Hierarchy Level: 2
// Model version: 9.2
// 
// -------------------------------------------------------------

`timescale 1 ns / 1 ns

module Peak_Searcher
          (clk,
           reset,
           enb_1_8_1,
           enb_1_8_0,
           enb,
           corrIn,
           corrValid,
           startIn,
           dataIn_re,
           dataIn_im,
           validIn,
           rstIn,
           lstfStart,
           validOut,
           dataOut_re,
           dataOut_im);


  input   clk;
  input   reset;
  input   enb_1_8_1;
  input   enb_1_8_0;
  input   enb;
  input   signed [31:0] corrIn;  // sfix32_En15
  input   corrValid;
  input   startIn;
  input   signed [15:0] dataIn_re;  // sfix16_En12
  input   signed [15:0] dataIn_im;  // sfix16_En12
  input   validIn;
  input   rstIn;
  output  lstfStart;
  output  validOut;
  output  signed [15:0] dataOut_re;  // sfix16_En12
  output  signed [15:0] dataOut_im;  // sfix16_En12


  wire [15:0] maxPeak;  // uint16
  wire maxPeakSearcher_countRst;
  wire signed [15:0] maxPeakSearcher_dataOut_re;  // sfix16_En12
  wire signed [15:0] maxPeakSearcher_dataOut_im;  // sfix16_En12
  wire maxPeakSearcher_validOut;
  wire peakDetector_lstfStart;
  wire peakDetector_validOut;


  maxPeakSearcher_block u_maxPeakSearcher (.clk(clk),
                                           .reset(reset),
                                           .enb_1_8_1(enb_1_8_1),
                                           .enb_1_8_0(enb_1_8_0),
                                           .enb(enb),
                                           .corrIn(corrIn),  // sfix32_En15
                                           .corrValid(corrValid),
                                           .startIn(startIn),
                                           .validIn(validIn),
                                           .dataIn_re(dataIn_re),  // sfix16_En12
                                           .dataIn_im(dataIn_im),  // sfix16_En12
                                           .rstIn(rstIn),
                                           .maxPeakValue(maxPeak),  // uint16
                                           .countRst(maxPeakSearcher_countRst),
                                           .dataOut_re(maxPeakSearcher_dataOut_re),  // sfix16_En12
                                           .dataOut_im(maxPeakSearcher_dataOut_im),  // sfix16_En12
                                           .validOut(maxPeakSearcher_validOut)
                                           );

  peakDetector u_peakDetector (.clk(clk),
                               .reset(reset),
                               .enb_1_8_1(enb_1_8_1),
                               .enb_1_8_0(enb_1_8_0),
                               .enb(enb),
                               .maxPeakVal(maxPeak),  // uint16
                               .counterRst(maxPeakSearcher_countRst),
                               .dataIn_re(maxPeakSearcher_dataOut_re),  // sfix16_En12
                               .dataIn_im(maxPeakSearcher_dataOut_im),  // sfix16_En12
                               .validIn(maxPeakSearcher_validOut),
                               .lstfStart(peakDetector_lstfStart),
                               .validOut(peakDetector_validOut),
                               .dataOut_re(dataOut_re),  // sfix16_En12
                               .dataOut_im(dataOut_im)  // sfix16_En12
                               );

  assign lstfStart = peakDetector_lstfStart;

  assign validOut = peakDetector_validOut;

endmodule  // Peak_Searcher

