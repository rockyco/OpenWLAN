// -------------------------------------------------------------
// 
// File Name: hdl_prj/hdlsrc/wlanhdlTimeAndFrequencySynchronization/searchStartOfFrame.v
// Created: 2026-02-04 22:38:43
// 
// Generated by MATLAB 25.1, HDL Coder 25.1, and Simulink 25.1
// 
// -------------------------------------------------------------


// -------------------------------------------------------------
// 
// Module: searchStartOfFrame
// Source Path: wlanhdlTimeAndFrequencySynchronization/WLANTimeAndFrequencySynchronization/Coarse Time Sync/Peak 
// Detector/searchStartOfFram
// Hierarchy Level: 3
// Model version: 9.2
// 
// -------------------------------------------------------------

`timescale 1 ns / 1 ns

module searchStartOfFrame
          (clk,
           reset,
           enb_1_8_0,
           thresholdValid,
           valid,
           syncOut);


  input   clk;
  input   reset;
  input   enb_1_8_0;
  input   thresholdValid;
  input   valid;
  output  syncOut;


  reg  syncOut_1;
  reg [7:0] countVal;  // ufix8
  reg  countEnb;
  reg [7:0] validCount;  // ufix8
  reg  detectFlag;
  reg [7:0] detectFlagCount;  // ufix8
  reg [7:0] countVal_next;  // ufix8
  reg  countEnb_next;
  reg [7:0] validCount_next;  // ufix8
  reg  detectFlag_next;
  reg [7:0] detectFlagCount_next;  // ufix8
  reg [7:0] countVal_temp;  // ufix8
  reg  countEnb_temp;
  reg [7:0] validCount_temp;  // ufix8
  reg  detectFlag_temp;
  reg [7:0] detectFlagCount_temp;  // ufix8
  reg [8:0] add_temp;  // ufix9
  reg [8:0] add_temp_0;  // ufix9
  reg [8:0] add_temp_1;  // ufix9
  reg [8:0] t_0;  // ufix9
  reg [8:0] t_1;  // ufix9
  reg [8:0] t_2;  // ufix9


  always @(posedge clk or posedge reset)
    begin : searchStartOfFrame_1_process
      if (reset == 1'b1) begin
        countVal <= 8'b00000000;
        countEnb <= 1'b0;
        validCount <= 8'b00000000;
        detectFlag <= 1'b0;
        detectFlagCount <= 8'b00000000;
      end
      else begin
        if (enb_1_8_0) begin
          countVal <= countVal_next;
          countEnb <= countEnb_next;
          validCount <= validCount_next;
          detectFlag <= detectFlag_next;
          detectFlagCount <= detectFlagCount_next;
        end
      end
    end

  always @(countEnb, countVal, detectFlag, detectFlagCount, thresholdValid, valid,
       validCount) begin
    add_temp = 9'b000000000;
    add_temp_0 = 9'b000000000;
    add_temp_1 = 9'b000000000;
    t_0 = 9'b000000000;
    t_1 = 9'b000000000;
    t_2 = 9'b000000000;
    countVal_temp = countVal;
    countEnb_temp = countEnb;
    validCount_temp = validCount;
    detectFlag_temp = detectFlag;
    detectFlagCount_temp = detectFlagCount;
    if (valid && thresholdValid) begin
      t_0 = {1'b0, validCount};
      add_temp = t_0 + 9'b000000001;
      if (add_temp[8] != 1'b0) begin
        validCount_temp = 8'b11111111;
      end
      else begin
        validCount_temp = add_temp[7:0];
      end
      countEnb_temp = 1'b1;
    end
    if (detectFlagCount > 8'b00000000) begin
      t_1 = {1'b0, detectFlagCount};
      add_temp_0 = t_1 + 9'b000000001;
      if (add_temp_0[8] != 1'b0) begin
        detectFlagCount_temp = 8'b11111111;
      end
      else begin
        detectFlagCount_temp = add_temp_0[7:0];
      end
    end
    if (countEnb_temp) begin
      t_2 = {1'b0, countVal};
      add_temp_1 = t_2 + 9'b000000001;
      if (add_temp_1[8] != 1'b0) begin
        countVal_temp = 8'b11111111;
      end
      else begin
        countVal_temp = add_temp_1[7:0];
      end
      if (countVal_temp == 8'b10100001) begin
        countVal_temp = 8'b00000000;
        countEnb_temp = 1'b0;
        if (validCount_temp > 8'b01010000) begin
          detectFlag_temp = 1'b1;
          detectFlagCount_temp = 8'b00000001;
        end
        else begin
          detectFlag_temp = 1'b0;
        end
        validCount_temp = 8'b00000000;
      end
    end
    if (detectFlagCount_temp > 8'b10100000) begin
      detectFlagCount_temp = 8'b00000000;
      detectFlag_temp = 1'b0;
    end
    syncOut_1 = detectFlag_temp;
    countVal_next = countVal_temp;
    countEnb_next = countEnb_temp;
    validCount_next = validCount_temp;
    detectFlag_next = detectFlag_temp;
    detectFlagCount_next = detectFlagCount_temp;
  end

  assign syncOut = syncOut_1;

endmodule  // searchStartOfFrame

